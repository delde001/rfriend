<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Correlation Plots with Factor Detection and Customization — f_corplot • rfriend</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Correlation Plots with Factor Detection and Customization — f_corplot"><meta name="description" content="Creates correlation plots for numeric variables in a data frame, optionally incorporating factors for coloring and shaping points. It supports automatic detection of factors, customization of plot aesthetics, and the generation of separate legend files."><meta property="og:description" content="Creates correlation plots for numeric variables in a data frame, optionally incorporating factors for coloring and shaping points. It supports automatic detection of factors, customization of plot aesthetics, and the generation of separate legend files."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rfriend</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Correlation Plots with Factor Detection and Customization</h1>

      <div class="d-none name"><code>f_corplot.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates correlation plots for numeric variables in a data frame, optionally incorporating factors for coloring and shaping points. It supports automatic detection of factors, customization of plot aesthetics, and the generation of separate legend files.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">f_corplot</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  detect_factors <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  factor_table <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  color_factor <span class="op">=</span> <span class="st">"auto"</span>,</span>
<span>  shape_factor <span class="op">=</span> <span class="st">"auto"</span>,</span>
<span>  print_legend <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  fancy_names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">15</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">15</span>,</span>
<span>  res <span class="op">=</span> <span class="fl">600</span>,</span>
<span>  pointsize <span class="op">=</span> <span class="fl">8</span>,</span>
<span>  close_generated_files <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  open_generated_files <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  output_type <span class="op">=</span> <span class="st">"word"</span>,</span>
<span>  save_as <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  save_in_wdir <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A <code>data.frame</code> containing the dataset to be visualized. Must include at least two numeric variables.</p></dd>


<dt id="arg-detect-factors">detect_factors<a class="anchor" aria-label="anchor" href="#arg-detect-factors"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, the function automatically detects factor variables in the dataset for coloring and shaping points. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-factor-table">factor_table<a class="anchor" aria-label="anchor" href="#arg-factor-table"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, prints a detailed table about the properties of the converted factors to the console. Default is FALSE, so no property table will be printed to the console.</p></dd>


<dt id="arg-color-factor">color_factor<a class="anchor" aria-label="anchor" href="#arg-color-factor"></a></dt>
<dd><p>Character. The name of the factor variable to use for point colors. If set to <code>"auto"</code>, it is automatically determined based on detected factors. Defaults to <code>"auto"</code>.</p></dd>


<dt id="arg-shape-factor">shape_factor<a class="anchor" aria-label="anchor" href="#arg-shape-factor"></a></dt>
<dd><p>Character. The name of the factor variable to use for point shapes. If set to <code>"auto"</code>, it is automatically determined based on detected factors. Defaults to <code>"auto"</code>.</p></dd>


<dt id="arg-print-legend">print_legend<a class="anchor" aria-label="anchor" href="#arg-print-legend"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, a separate legend file is created and displayed. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-fancy-names">fancy_names<a class="anchor" aria-label="anchor" href="#arg-fancy-names"></a></dt>
<dd><p>Named character vector or <code>NULL</code>. Optional mapping of column names to more readable names for display in plots and legends.</p></dd>


<dt id="arg-width">width<a class="anchor" aria-label="anchor" href="#arg-width"></a></dt>
<dd><p>Numeric. The width of the output plot in centimeters (default 15 cm).</p></dd>


<dt id="arg-height">height<a class="anchor" aria-label="anchor" href="#arg-height"></a></dt>
<dd><p>Numeric. The height of the output plot in centimeters (default 15 cm).</p></dd>


<dt id="arg-res">res<a class="anchor" aria-label="anchor" href="#arg-res"></a></dt>
<dd><p>Numeric. The resolution (in dots per inch) for the output plot image (defaults 1000 dpi).</p></dd>


<dt id="arg-pointsize">pointsize<a class="anchor" aria-label="anchor" href="#arg-pointsize"></a></dt>
<dd><p>Numeric. The base font size for text in the plot image. Defaults to 8.</p></dd>


<dt id="arg-close-generated-files">close_generated_files<a class="anchor" aria-label="anchor" href="#arg-close-generated-files"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, closes open 'Word' files depending on the output format. This to be able to save the newly generated files. 'Pdf' files should also be closed before using the function and cannot be automatically closed. Default is <code>FALSE</code>.</p></dd>


<dt id="arg-open-generated-files">open_generated_files<a class="anchor" aria-label="anchor" href="#arg-open-generated-files"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, Opens the generated 'Word' output files. This to directly view the results after creation. Files are stored in tempdir(). Default is <code>TRUE</code>.</p></dd>


<dt id="arg-output-type">output_type<a class="anchor" aria-label="anchor" href="#arg-output-type"></a></dt>
<dd><p>Character string specifying the output format: "pdf", "word", "png" or "rmd". Default is "word".</p></dd>


<dt id="arg-save-as">save_as<a class="anchor" aria-label="anchor" href="#arg-save-as"></a></dt>
<dd><p>Character string specifying the output file path (without extension).
If a full path is provided, output is saved to that location.
If only a filename is given, the file is saved in <code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code>.
If only a directory is specified (providing an existing directory with trailing slash),
the file is named "dataname_CorPlot" in that directory. If an extension is provided the output format specified with option "output_type" will be overruled.
Defaults to <code>file.path(tempdir(), "dataname_CorPlot.docx")</code>.</p></dd>


<dt id="arg-save-in-wdir">save_in_wdir<a class="anchor" aria-label="anchor" href="#arg-save-in-wdir"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, saves the file in the working directory. Default is <code>FALSE</code>, this avoid unintended changes to the global environment. If <code>save_as</code> location is specified <code>save_in_wdir</code> is overwritten by <code>save_as</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Output is a 'Word' document with:</p><ul><li><p>A correlation plot.</p></li>
<li><p>A legend if applicable.</p></li>
</ul><p>Using the option "output_type", it can also generate output in the form of: R Markdown code, 'pdf', or 'PNG' files. No value is returned to the R environment; instead, files are saved, and they are opened automatically if running on Windows.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<ul><li><p>Factor Detection: If <code>detect_factors</code> is enabled, up to two factors are automatically detected from the dataset and used for coloring (<code>color_factor</code>) and shaping (<code>shape_factor</code>) points in the plot.</p></li>
<li><p>Customization: Users can manually specify which factors to use by setting <code>color_factor</code> and/or (<code>shape_factor</code>). Non-factor variables are converted into factors automatically, with a message indicating this conversion.</p></li>
<li><p>Legend Generation: A separate legend file is created when factors are used or if <code>print_legend</code> is explicitly set to <code>TRUE</code>.</p></li>
</ul><p>The function uses numeric variables in the dataset for scatterplots and computes Pearson correlations displayed in the upper triangle of the correlation matrix.</p>
<p>This function requires [Pandoc](https://github.com/jgm/pandoc/releases/tag) (version 1.12.3 or higher), a universal document converter.</p><ul><li><p><b>Windows:</b> Install Pandoc and ensure the installation folder <br> (e.g., "C:/Users/your_username/AppData/Local/Pandoc") is added to your system PATH.</p></li>
<li><p><b>macOS:</b> If using Homebrew, Pandoc is typically installed in "/usr/local/bin". Alternatively, download the .pkg installer and verify that the binary’s location is in your PATH.</p></li>
<li><p><b>Linux:</b> Install Pandoc through your distribution’s package manager (commonly installed in "/usr/bin" or "/usr/local/bin") or manually, and ensure the directory containing Pandoc is in your PATH.</p></li>
<li><p>If Pandoc is not found, this function may not work as intended.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>

<ul><li><p>At least two numeric variables are required in the dataset; otherwise, an error is thrown.</p></li>
<li><p>If more than two factors are detected, only the first two are used with a warning message.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Sander H. van Delden  <a href="mailto:plantmind@proton.me">plantmind@proton.me</a> <br></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Example usage:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"mtcars"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">mtcars_sub</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">mtcars</span>, select <span class="op">=</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">am</span>, <span class="va">qsec</span>, <span class="va">vs</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Customizing factors:</span></span></span>
<span class="r-in"><span><span class="fu">f_corplot</span><span class="op">(</span><span class="va">mtcars_sub</span>,</span></span>
<span class="r-in"><span>           shape_factor <span class="op">=</span> <span class="st">"cyl"</span>,</span></span>
<span class="r-in"><span>           color_factor <span class="op">=</span> <span class="st">"gear"</span>,</span></span>
<span class="r-in"><span>           output_type <span class="op">=</span> <span class="st">"png"</span>,</span></span>
<span class="r-in"><span>           open_generated_files <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span>           <span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Variable: gear was converted to a factor</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Variable: cyl was converted to a factor  </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Saving output in: /tmp/RtmpDUIw9V/mtcars_sub_CorPlot.png and /tmp/RtmpDUIw9V/mtcars_sub_Legend.png</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Output to MS Word and add fancy column names, only adjusting two of the four variable names.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fancy_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Sepal.Length <span class="op">=</span> <span class="st">"Sepal Length (cm)"</span>, Sepal.Width <span class="op">=</span> <span class="st">"Sepal Width (cm)"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">f_corplot</span><span class="op">(</span><span class="va">iris</span>,</span></span>
<span class="r-in"><span>           fancy_names <span class="op">=</span> <span class="va">fancy_names</span>,</span></span>
<span class="r-in"><span>           output_type <span class="op">=</span> <span class="st">"word"</span>,</span></span>
<span class="r-in"><span>           open_generated_files <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span>           <span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Saving output in: /tmp/RtmpDUIw9V/iris_CorPlot.docx</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sander H. van Delden.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

